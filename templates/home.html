<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Queue Status</title>
    <style>
        textarea {
            width: 100%;
            height: 700px;
        }        
        table { 
            width: 100%;
            table-layout: fixed;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Queue Status</h1>

    <button onclick="location.reload()" id="refreshButton">Refresh</button>

    <table>
        <tr>
            <th></th>
            <th>In</th>
            <th>Ongoing</th>
            <th>Finished</th>
        </tr>
        <tr>
            <th>Audio</th>
            <td><textarea id="audioIn" readonly>{{ audio_in|join('\n') }}</textarea></td>
            <td><textarea id="audioOngoing" readonly>{{ audio_ongoing|join('\n') }}</textarea></td>
            <td><textarea id="audioFinished" readonly>{{ audio_finished|join('\n') }}</textarea></td>
        </tr>
        <tr>
            <th>Video</th>
            <td><textarea id="videoIn" readonly>{{ video_in|join('\n') }}</textarea></td>
            <td><textarea id="videoOngoing" readonly>{{ video_ongoing|join('\n') }}</textarea></td>
            <td><textarea id="videoFinished" readonly>{{ video_finished|join('\n') }}</textarea></td>
        </tr>
    </table>

    <script>
        $(document).ready(function() {
            $('#refreshButton').click(function() {
                $.get('/queue', function(data) {
                    $('#audioIn').text(data.audio_in.join('\n'));
                    $('#audioOngoing').text(data.audio_ongoing.join('\n'));
                    $('#audioFinished').text(data.audio_finished.join('\n'));
                    $('#videoIn').text(data.video_in.join('\n'));
                    $('#videoOngoing').text(data.video_ongoing.join('\n'));
                    $('#videoFinished').text(data.video_finished.join('\n'));
                });
            });
        });
    </script>
</body>
</html>
